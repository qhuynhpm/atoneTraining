<div id="my-profile" class="user-profile">
  <% if @current_user %>
    <h1><%= @current_user["display_name"] + "の情報"%></h1>

    <div id="follower-info" class="profile-section">
      <p><%="Followers: " + @follow_info["followers"].to_s%></p>
      <p><%="Following: " + @follow_info["followings"].to_s%></p>
    </div>
    <% if @is_following %>
      <%= form_tag profile_unfollow_path, id: "unfollow-form" do %>
        <%= hidden_field_tag :id, @current_user["id"] %>
        <%= submit_tag "Unfollow", id: "fl-btn-unfollow", class: "submit-button" %>
      <% end %>
    <% else %>
      <%= form_tag profile_follow_path, id: "follow-form" do %>
        <%= hidden_field_tag :id, @current_user["id"] %>
        <%= submit_tag "Follow", id: "fl-btn-follow", class: "submit-button" %>
      <% end %>
    <% end %>


    <div id="user-info" class="profile-section">
      <p>ID: <%= @current_user["id"] %></p>
      <p>ナーム: <%= @current_user["display_name"] %></p>
    </div>

    <div id="game-history" class="profile-section">
      <h1>ゲームした歴史</h1>
      <% if @histories %>
        <table id="game-history-table">
          <thead>
            <tr>
              <th>結果</th>
              <th>価値</th>
              <th>相手</th>
              <th>時間</th>
            </tr>
          </thead>
          <tbody>
            <% @histories.each do |history| %>
              <tr>
                <td><%= history['profit'] > 0? "負" : "勝" %></td>
                <td><%= history['profit'] %></td>
                <td><%= history['opponent'] %></td>
                <td><%= history['time'] %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p>ゲーム歴史がありません。</p>
      <% end %>
    </div>
  <% else %>
    <p>情報収集が失敗でした！</p>
  <% end %>
</div>
